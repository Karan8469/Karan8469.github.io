<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Unfolding Universe: An Infographic on Entropy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Energetic & Playful -->
    <!-- Application Structure Plan: The infographic follows a narrative structure, starting with the fundamental definition of entropy (S = kB ln W), then explaining the physical mechanism of energy dispersal. It uses a concrete example (hot ball in water) to solidify the concept, explores the influence of macroscopic variables (T, V, P) with interactive simulations, and introduces the Second Law, the Arrow of Time, key equations, and finally, guidance on numerical problems. This progressive disclosure is designed to build understanding from the ground up, making a complex topic digestible for a general audience. -->
    <!-- Visualization & Content Choices: 
        1.  Big Number (W): Data(Concept of many microstates) -> Goal(Inform) -> Viz(Large styled text) -> Justification(Emphasizes the scale of 'W' simply and effectively). Method: HTML/CSS.
        2.  Energy Dispersal Diagram: Data(Energy flowing from hot to cold) -> Goal(Organize/Change) -> Viz(Styled HTML/CSS flow diagram) -> Justification(Visually represents the process of dispersal without complex animation, focusing on the core concept). Method: HTML/CSS with Tailwind.
        3.  Hot Ball Example: Data(Entropy change in a system) -> Goal(Change/Compare) -> Viz(Chart.js Line Chart) -> Justification(A line chart is the best way to show the change in three related values (ball, water, total entropy) over time). Method: Chart.js.
        4.  Factors Simulations: Data(Effects of T, V, P) -> Goal(Relationships) -> Viz(Interactive Canvas-based particle simulations) -> Justification(Provides a direct, tangible way for users to see how macroscopic variables affect microscopic behavior, making the abstract relationships concrete). Method: Custom JS Particle System rendering on Canvas.
        5.  Second Law & Arrow of Time: Data(Fundamental principles) -> Goal(Inform) -> Viz(Textual explanation with key takeaways) -> Justification(Best conveyed through clear, concise text to explain abstract principles). Method: HTML/CSS.
        6.  Key Equations: Data(Mathematical formulations) -> Goal(Inform) -> Viz(LaTeX rendered equations) -> Justification(Provides precise mathematical definitions for reference). Method: MathJax.
        7.  Numerical Problems: Data(Guidance on problem-solving) -> Goal(Inform/Organize) -> Viz(Structured text with lists) -> Justification(Best conveyed through clear, concise text and bullet points for practical advice). Method: HTML/CSS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9F9F9;
            color: #374785;
        }
        .section-card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .sim-container {
            width: 100%;
            height: 200px;
            background-color: #F8E9A11A;
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
            border: 2px solid #F8E9A1;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-[#374785] text-white py-12 text-center">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl md:text-6xl font-bold tracking-tight">The Unfolding Universe</h1>
            <p class="mt-4 text-lg md:text-xl text-[#A8D0E6]">An Interactive Guide to Entropy</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">

        <section id="what-is-entropy" class="section-card grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
            <div>
                <h2 class="text-3xl font-bold text-[#F76C6C]">What is Entropy?</h2>
                <p class="mt-4 text-lg">Entropy is not just "disorder." It's a precise measure of the number of ways the microscopic parts of a system can be arranged to produce the same macroscopic state we observe.</p>
                <p class="mt-4 text-lg">The core idea is captured by the Boltzmann equation:</p>
                <div class="mt-4 text-2xl font-mono bg-gray-100 p-4 rounded-lg text-center">
                    $$S = k_B \ln W$$
                </div>
            </div>
            <div class="text-center">
                <p class="text-xl">For a given state, 'W' is the number of possible microscopic arrangements.</p>
                <p class="text-8xl font-bold text-[#A8D0E6] my-4" id="microstate-counter">59.0T</p>
                <p class="text-lg">For 30 energy packets among 30 atoms, there are 59 Trillion+ microstates!</p>
            </div>
        </section>

        <section id="energy-dispersal" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">Energy Always Spreads Out</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">The two key ideas of entropy — "number of ways" (W) and "energy dispersal" — are two sides of the same coin. Energy spreading out is the physical process that unlocks more possible arrangements, increasing 'W'.</p>
            <div class="mt-8 flex flex-col md:flex-row items-center justify-center gap-4 text-center">
                <div class="p-4 bg-red-100 border-2 border-[#F76C6C] rounded-lg">
                    <p class="font-bold text-xl">Concentrated Energy</p>
                    <p>(Hot Spot)</p>
                    <p class="mt-2 text-2xl">➔ Few Arrangements</p>
                    <p class="font-bold text-[#F76C6C]">Low Entropy</p>
                </div>
                <div class="text-5xl font-bold text-[#A8D0E6]">→</div>
                <div class="p-4 bg-blue-100 border-2 border-[#A8D0E6] rounded-lg">
                    <p class="font-bold text-xl">Dispersed Energy</p>
                    <p>(Spread Out)</p>
                    <p class="mt-2 text-2xl">➔ Many Arrangements</p>
                    <p class="font-bold text-[#374785]">High Entropy</p>
                </div>
            </div>
            <p class="mt-6 text-lg text-center max-w-3xl mx-auto">A system naturally moves to a state of higher entropy because it's statistically more probable. There are simply more ways for energy to be spread out than for it to be concentrated.</p>
        </section>

        <section id="hot-ball-example" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">Example: Hot Ball in Water</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">When a hot metal ball is dropped in cool water, its concentrated energy disperses into the vast number of water molecules. The ball's entropy decreases, but the water's entropy increases much more, leading to a net increase in the total entropy of the system.</p>
            <div class="mt-8 chart-container">
                <canvas id="hotBallChart"></canvas>
            </div>
        </section>

        <section id="influencing-factors" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">How Temperature & Pressure Affect Entropy</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">We can control a system's entropy by changing its macroscopic properties like temperature and pressure (which is inversely related to volume). Interact with the simulations below to see how.</p>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-bold text-center mb-2">Temperature Effect</h3>
                    <p class="text-center mb-4">Higher temperature gives particles more energy, making them move faster and unlocking more ways to arrange that energy.</p>
                    <div class="sim-container"><canvas id="tempSimCanvas"></canvas></div>
                    <div class="mt-4">
                        <label for="tempSlider" class="font-medium">Temperature: <span id="tempValue" class="font-bold text-[#F76C6C]">300</span> K</label>
                        <input id="tempSlider" type="range" min="10" max="1000" value="300" class="w-full">
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-center mb-2">Volume & Pressure Effect</h3>
                    <p class="text-center mb-4">Larger volume gives particles more space to move, increasing possible arrangements. This corresponds to lower pressure.</p>
                    <div class="sim-container"><canvas id="volumeSimCanvas"></canvas></div>
                    <div class="mt-4">
                        <label for="volumeSlider" class="font-medium">Volume: <span id="volumeValue" class="font-bold text-[#A8D0E6]">50</span> %</label>
                        <input id="volumeSlider" type="range" min="10" max="100" value="50" class="w-full">
                        <p class="text-sm mt-2 font-medium">Relative Pressure: <span id="pressureValue" class="font-bold text-[#374785]">High</span></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="second-law" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">The Second Law of Thermodynamics</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">This fundamental law dictates the direction of spontaneous processes and the ultimate fate of isolated systems. It's not about disorder, but about probability.</p>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h3 class="text-2xl font-bold text-[#A8D0E6] mb-2">Statistical Imperative</h3>
                    <p class="text-lg">The Second Law states that the total entropy of an isolated system can only increase over time or remain constant during a reversible process. Systems naturally evolve towards states of higher entropy because these states simply encompass an overwhelmingly larger number of underlying microstates.</p>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-[#A8D0E6] mb-2">Equilibrium: The Most Probable State</h3>
                    <p class="text-lg">Equilibrium, the state a system naturally approaches, is the macrostate with the highest entropy. This represents the most probable distribution of energy and particles. Given enough time, a system will inevitably explore these more numerous configurations.</p>
                </div>
            </div>
        </section>

        <section id="arrow-of-time" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">Entropy and the Arrow of Time</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">The increase in entropy provides a fundamental explanation for the perceived "arrow of time" and the irreversibility of natural processes.</p>
            <div class="mt-8 flex flex-col md:flex-row items-center justify-center gap-8 text-center">
                <div class="p-6 bg-gray-100 rounded-lg shadow-inner">
                    <p class="text-xl font-bold text-[#374785]">Irreversibility</p>
                    <p class="mt-2">It is statistically improbable for a system to spontaneously revert to a lower entropy state once its energy has dispersed and its microstates have multiplied. Processes like a broken glass do not spontaneously reassemble.</p>
                </div>
                <div class="text-5xl font-bold text-[#F76C6C]">⇌</div>
                <div class="p-6 bg-gray-100 rounded-lg shadow-inner">
                    <p class="text-xl font-bold text-[#374785]">Time's Direction</p>
                    <p class="mt-2">While microscopic interactions are reversible, the macroscopic evolution of an isolated system is not. It moves from less probable (low entropy) to more probable (high entropy) states, defining the forward direction of time.</p>
                </div>
            </div>
            <p class="mt-6 text-lg text-center max-w-3xl mx-auto">If the universe is considered an isolated system, its ultimate fate is a state of maximum entropy, often termed "heat death," where all energy is uniformly distributed and no further work can be done.</p>
        </section>

        <section id="key-equations" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">Key Entropy Equations</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">These fundamental equations quantify entropy and its changes based on macroscopic properties and microscopic arrangements.</p>
            <div class="mt-8 bg-gray-50 p-8 rounded-xl shadow-inner max-w-3xl mx-auto text-lg leading-relaxed">
                <h3 class="text-xl font-semibold text-[#374785] mb-4">Boltzmann Equation (Statistical Definition)</h3>
                <p class="font-mono bg-gray-100 text-gray-800 px-3 py-2 rounded-md mb-6 text-center">
                    $$S = k_B \ln W$$
                </p>
                <p class="text-gray-700 mb-6">Where: <br>
                    \(S\) is entropy<br>
                    \(k_B\) is Boltzmann's constant<br>
                    \(W\) is the number of possible microstates corresponding to a given macrostate
                </p>

                <h3 class="text-xl font-semibold text-[#374785] mb-4">Entropy Change with Temperature (Constant Volume)</h3>
                <p class="font-mono bg-gray-100 text-gray-800 px-3 py-2 rounded-md mb-6 text-center">
                    $$\Delta S = n C_v \ln\left(\frac{T_2}{T_1}\right)$$
                </p>
                <p class="text-gray-700 mb-6">Where: <br>
                    \(\Delta S\) is the change in entropy<br>
                    \(n\) is the number of moles<br>
                    \(C_v\) is the molar heat capacity at constant volume<br>
                    \(T_1\) and \(T_2\) are initial and final temperatures
                </p>

                <h3 class="text-xl font-semibold text-[#374785] mb-4">Entropy Change with Volume (Constant Temperature)</h3>
                <p class="font-mono bg-gray-100 text-gray-800 px-3 py-2 rounded-md mb-6 text-center">
                    $$\Delta S = n R \ln\left(\frac{V_2}{V_1}\right)$$
                </p>
                <p class="text-gray-700 mb-6">Where: <br>
                    \(\Delta S\) is the change in entropy<br>
                    \(n\) is the number of moles<br>
                    \(R\) is the ideal gas constant<br>
                    \(V_1\) and \(V_2\) are initial and final volumes
                </p>

                <h3 class="text-xl font-semibold text-[#374785] mb-4">Entropy Change with Pressure (Constant Temperature)</h3>
                <p class="text-gray-700 mb-2">Given \(V_2/V_1 = P_1/P_2\) (for ideal gases at constant temperature), the equation becomes:</p>
                <p class="font-mono bg-gray-100 text-gray-800 px-3 py-2 rounded-md mb-6 text-center">
                    $$\Delta S = n R \ln\left(\frac{P_1}{P_2}\right)$$
                </p>
                <p class="text-gray-700">Where: <br>
                    \(\Delta S\) is the change in entropy<br>
                    \(n\) is the number of moles<br>
                    \(R\) is the ideal gas constant<br>
                    \(P_1\) and \(P_2\) are initial and final pressures
                </p>
            </div>
        </section>

        <section id="numerical-problems" class="section-card">
            <h2 class="text-3xl font-bold text-[#F76C6C] text-center">Tackling Numerical Problems & Common Mistakes</h2>
            <p class="mt-4 text-lg text-center max-w-3xl mx-auto">Solving entropy-related numerical problems requires a systematic approach and an awareness of common pitfalls. Here are some tips and mistakes to avoid:</p>
            
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-bold text-[#A8D0E6] mb-4">Tips for Solving Numerical Problems</h3>
                    <ul class="list-disc list-inside text-lg space-y-2">
                        <li>**Understand the Scenario:** Read the problem carefully. Is the system isolated? Is the process isothermal, isobaric, or is heat being exchanged?</li>
                        <li>**Identify Given & Required:** List all known variables (e.g., \(T_1\), \(V_1\), \(n\), \(C_v\)) and what you need to find (\(\Delta S\), final \(T\), etc.).</li>
                        <li>**Choose the Right Formula:** Select the appropriate entropy equation based on the given conditions (e.g., constant volume, constant temperature).</li>
                        <li>**Unit Consistency is Key:** Always convert all quantities to consistent SI units (e.g., Temperature in Kelvin, Volume in \(m^3\), Pressure in Pascals, Energy in Joules). Remember \(R = 8.314 \, J/(mol \cdot K)\) for ideal gases.</li>
                        <li>**Step-by-Step Approach:** Break down complex problems into smaller, manageable steps. Calculate intermediate values if necessary.</li>
                        <li>**Check Assumptions:** Be aware of any ideal gas assumptions or other simplifications made in the problem.</li>
                        <li>**Sign Convention:** Pay attention to the sign of \(\Delta S\). Positive \(\Delta S\) means entropy increased (more disorder/dispersal), negative means it decreased (less disorder/dispersal).</li>
                        <li>**Consider Phase Changes:** If a phase change (e.g., melting, boiling) occurs, remember to include the entropy change associated with that transition (\(\Delta S = \frac{\Delta H_{phase \, change}}{T_{phase \, change}}\)).</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-[#A8D0E6] mb-4">Common Mistakes to Avoid</h3>
                    <ul class="list-disc list-inside text-lg space-y-2">
                        <li>**Unit Conversion Errors:** This is perhaps the most frequent mistake. Forgetting to convert Celsius to Kelvin, or mL to \(m^3\), will lead to incorrect answers.</li>
                        <li>**Incorrect Formula Application:** Using a constant volume formula for an isothermal process, or vice-versa.</li>
                        <li>**Misinterpreting \(\Delta S\) Sign:** Incorrectly stating whether entropy increased or decreased based on the calculated value.</li>
                        <li>**Confusing \(C_v\) and \(C_p\):** Using the molar heat capacity at constant pressure (\(C_p\)) when the problem specifies constant volume, or vice-versa.</li>
                        <li>**Neglecting System Boundaries:** Not correctly identifying if the system is isolated or if heat/work is exchanged with the surroundings.</li>
                        <li>**Algebraic/Calculation Errors:** Simple arithmetic mistakes can derail an otherwise correct setup. Double-check your calculations.</li>
                        <li>**Ignoring Logarithm Properties:** Errors in applying properties of natural logarithms.</li>
                        <li>**Overlooking Phase Transitions:** Forgetting to account for the entropy change during melting, freezing, boiling, or condensation.</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-[#374785] text-white py-8 text-center">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold">Conclusion</h2>
            <p class="mt-4 text-lg max-w-3xl mx-auto">Entropy, fundamentally defined by the number of possible microscopic arrangements (W), is driven by the intrinsic tendency of energy packets to disperse. This dispersal is facilitated by the availability of more particles and a wider range of energy levels within a larger system, leading to a statistically more probable, higher entropy state. The Second Law of Thermodynamics governs this natural progression, asserting that the total entropy of an isolated system can only increase or remain constant.</p>
            <p class="mt-2 text-lg max-w-3xl mx-auto">The principles of entropy extend far beyond the confines of a physics laboratory. They are universally applicable, governing phenomena from the simplest chemical reactions and complex biological processes to the grand-scale evolution of the universe itself. Entropy provides profound insights into the directionality of time, explaining why processes unfold in one direction and why equilibrium is an inevitable outcome. It underscores the statistical nature of the physical world, where the apparent "randomness" is merely a macroscopic manifestation of the overwhelming probability of dispersed configurations. This understanding reframes the common perception of entropy, moving beyond a simple notion of "disorder" to reveal it as a fundamental principle describing the universe's natural tendency towards the most probable distribution of energy and matter.</p>
        </div>
    </footer>
    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
        document.addEventListener('DOMContentLoaded', () => {
            if (window.MathJax) {
                MathJax.typesetPromise();
            }

            const microstateCounter = document.getElementById('microstate-counter');
            let count = 0;
            const finalCount = 59.0;
            const duration = 2000;
            const stepTime = Math.abs(Math.floor(duration / finalCount));
            const timer = setInterval(() => {
                count += 0.5;
                microstateCounter.textContent = count.toFixed(1) + 'T';
                if (count >= finalCount) {
                    clearInterval(timer);
                    microstateCounter.textContent = finalCount.toFixed(1) + 'T';
                }
            }, stepTime);

            const hotBallCtx = document.getElementById('hotBallChart').getContext('2d');
            const labels = Array.from({ length: 51 }, (_, i) => i * 2);
            const ballEntropy = labels.map(x => 60 * Math.exp(-x / 20));
            const waterEntropy = labels.map(x => 10 + 80 * (1 - Math.exp(-x / 25)));
            const totalEntropy = labels.map((_, i) => ballEntropy[i] + waterEntropy[i]);
            
            new Chart(hotBallCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Ball Entropy', data: ballEntropy, borderColor: '#F76C6C', backgroundColor: '#F76C6C33', tension: 0.4, fill: false },
                        { label: 'Water Entropy', data: waterEntropy, borderColor: '#A8D0E6', backgroundColor: '#A8D0E633', tension: 0.4, fill: false },
                        { label: 'Total System Entropy', data: totalEntropy, borderColor: '#374785', backgroundColor: '#37478533', tension: 0.4, fill: true, borderWidth: 3 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Relative Entropy' } }, x: { title: { display: true, text: 'Time' } } },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                title: function(tooltipItems) {
                                    const item = tooltipItems[0];
                                    let label = item.chart.data.labels[item.dataIndex];
                                    if (Array.isArray(label)) { return label.join(' '); }
                                    return `Time: ${label}`;
                                }
                            }
                        },
                        legend: { position: 'bottom' }
                    }
                }
            });

            class ParticleSystem {
                constructor(canvasId) {
                    this.canvas = document.getElementById(canvasId);
                    this.ctx = this.canvas.getContext('2d');
                    this.particles = [];
                    this.animationId = null;
                    this.speed = 1.5;
                    this.widthRatio = 1.0;
                    this.particleCount = 50;
                    this.particleRadius = 3;
                    this.resizeCanvas();
                    window.addEventListener('resize', () => this.resizeCanvas());
                }

                resizeCanvas() {
                    const parent = this.canvas.parentElement;
                    this.canvas.width = parent.clientWidth;
                    this.canvas.height = parent.clientHeight;
                    this.createParticles();
                }

                createParticles() {
                    this.particles = [];
                    for (let i = 0; i < this.particleCount; i++) {
                        this.particles.push({
                            x: Math.random() * (this.canvas.width * this.widthRatio - this.particleRadius * 2) + this.particleRadius,
                            y: Math.random() * (this.canvas.height - this.particleRadius * 2) + this.particleRadius,
                            vx: (Math.random() - 0.5) * 2,
                            vy: (Math.random() - 0.5) * 2,
                            color: 'hsl(250, 80%, 60%)'
                        });
                    }
                }

                updateSpeed(speed) {
                    this.speed = speed;
                    const hue = 240 - (speed * 40);
                    this.particles.forEach(p => {
                        p.color = `hsl(${hue}, 80%, 60%)`;
                    });
                }

                updateSize(widthRatio) {
                    this.widthRatio = widthRatio;
                    this.particles.forEach(p => {
                        if (p.x > this.canvas.width * this.widthRatio) {
                            p.x = Math.random() * (this.canvas.width * this.widthRatio - this.particleRadius * 2) + this.particleRadius;
                        }
                    });
                }

                start() {
                    const animate = () => {
                        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                        const effectiveWidth = this.canvas.width * this.widthRatio;

                        this.particles.forEach(p => {
                            p.x += p.vx * this.speed;
                            p.y += p.vy * this.speed;

                            if (p.x <= this.particleRadius || p.x >= effectiveWidth - this.particleRadius) p.vx *= -1;
                            if (p.y <= this.particleRadius || p.y >= this.canvas.height - this.particleRadius) p.vy *= -1;
                            
                            p.x = Math.max(this.particleRadius, Math.min(p.x, effectiveWidth - this.particleRadius));
                            p.y = Math.max(this.particleRadius, Math.min(p.y, this.canvas.height - this.particleRadius));

                            this.ctx.beginPath();
                            this.ctx.arc(p.x, p.y, this.particleRadius, 0, Math.PI * 2);
                            this.ctx.fillStyle = p.color;
                            this.ctx.fill();
                        });
                        this.animationId = requestAnimationFrame(animate);
                    };
                    if (this.animationId) cancelAnimationFrame(this.animationId);
                    animate();
                }
            }

            const tempSystem = new ParticleSystem('tempSimCanvas');
            tempSystem.start();
            const volumeSystem = new ParticleSystem('volumeSimCanvas');
            volumeSystem.start();

            const tempSlider = document.getElementById('tempSlider');
            const tempValue = document.getElementById('tempValue');
            tempSlider.addEventListener('input', (e) => {
                const temp = parseInt(e.target.value);
                tempValue.textContent = `${temp} K`;
                tempSystem.updateSpeed(temp / 200);
            });
            tempSystem.updateSpeed(parseInt(tempSlider.value) / 200);

            const volumeSlider = document.getElementById('volumeSlider');
            const volumeValue = document.getElementById('volumeValue');
            const pressureValue = document.getElementById('pressureValue');
            volumeSlider.addEventListener('input', (e) => {
                const volume = parseInt(e.target.value);
                volumeValue.textContent = `${volume} %`;
                volumeSystem.updateSize(volume / 100);
                
                if (volume < 33) pressureValue.textContent = 'High';
                else if (volume < 66) pressureValue.textContent = 'Medium';
                else pressureValue.textContent = 'Low';
            });
            volumeSystem.updateSize(parseInt(volumeSlider.value) / 100);
        });
    </script>
</body>
</html>
